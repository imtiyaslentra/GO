-- Memuat Orion Library
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()
local Window = OrionLib:MakeWindow({Name = "Blade Ball AutoParry & AutoSpam", HidePremium = false, SaveConfig = true, ConfigFolder = "BladeBallSettings"})

-- Variabel kontrol untuk Auto Parry dan Auto Spam
local autoParry = false
local autoSpam = false

-- Fungsi utama Auto Parry
local function autoParryFunction()
    local player = game.Players.LocalPlayer
    local ball_Position, ball_Velocity
    while autoParry do
        -- Ambil bola dari workspace
        local ball = game.Workspace:FindFirstChild("Ball")
        if ball then
            ball_Position = ball.Position
            ball_Velocity = ball.AssemblyLinearVelocity
            -- Prediksi posisi bola
            local targetPosition = (ball:GetAttribute('target') == player.Name and player.Character.PrimaryPart.Position or ball.Position)
            local ball_DirectionNew = (targetPosition - ball_Position).Unit
            local ball_DistanceNew = (targetPosition - ball_Position).Magnitude
            local ball_Dot_New = ball_DirectionNew:Dot(ball_Velocity.Unit)
            local angle_degrees = math.deg(math.acos(ball_Dot_New))

            -- Perhitungan jarak, kecepatan bola, dan sudut
            local ball_Speed = ball_Velocity.Magnitude
            local player_Position = player.Character.PrimaryPart.Position
            local ball_predicted_Distance = (player_Position - (ball_Position + (ball_Velocity * 0.25))).Magnitude

            -- Tentukan apakah bisa melakukan parry
            if ball_predicted_Distance <= data.parry_Range and angle_degrees < 69 then
                -- Kirim permintaan parry ke server
                game.ReplicatedStorage.Remotes.ParryEvent:FireServer()
                data.hit_Count = data.hit_Count + 1
                task.delay(0.2, function()
                    data.hit_Count = data.hit_Count - 1
                end)
                data.canParry = false
                task.wait(1)
                data.canParry = true
            end
        end
        wait(0.1)
    end
end

-- Fungsi utama Auto Spam
local function autoSpamFunction()
    local player = game.Players.LocalPlayer
    while autoSpam do
        local ball = game.Workspace:FindFirstChild("Ball")
        if ball then
            local ball_Velocity = ball.AssemblyLinearVelocity
            local ball_Speed = ball_Velocity.Magnitude
            local target_Position = ball:GetAttribute('target') == player.Name and player.Character.PrimaryPart.Position
            local target_Distance = (player.Character.PrimaryPart.Position - ball.Position).Magnitude
            if ball_Speed >= 250 and target_Distance <= 15 then
                game.ReplicatedStorage.Remotes.AttackEvent:FireServer()
            end
        end
        wait(0.1)
    end
end

-- Membuat Tab di GUI untuk Auto Parry dan Auto Spam
local Tab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Tombol Auto Parry
Tab:AddToggle({
    Name = "Auto Parry",
    Default = false,
    Callback = function(Value)
        autoParry = Value
        if autoParry then
            autoParryFunction()
        end
    end
})

-- Tombol Auto Spam
Tab:AddToggle({
    Name = "Auto Spam",
    Default = false,
    Callback = function(Value)
        autoSpam = Value
        if autoSpam then
            autoSpamFunction()
        end
    end
})

-- Inisialisasi Orion Library
OrionLib:Init()
